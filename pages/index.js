import Head from "next/head";
import styled from "styled-components";
import AsanaCard from "../components/Asana-Card/AsanaCard";
import asanas from "../db";
import { useState } from "react";

export default function Home() {
  const [searchQuery, setSearchQuery] = useState();

  console.log(searchQuery);

  function handleSearch(event) {
    event.preventDefault();
    setSearchQuery(event.target.value);
  }

  return (
    <div>
      <Head>
        <title>My App</title>
        <meta name="description" content="Generated by create next app" />
        <link rel="icon" href="/favicon.ico" />
      </Head>

      <main>
        <h1>Your Daily Flow</h1>
        <form>
          <input
            type="text"
            id="search"
            name="searchbar"
            onChange={handleSearch}
          />
        </form>
        <StyledList>
          {asanas.map((asana) => {
            if (asana.english_name.includes(searchQuery)) {
              return (
                <li key={asana.id}>
                  <AsanaCard
                    name={asana.english_name}
                    img={asana.img_url}
                    id={asana.id}
                    showDeleteButton={false}
                  />
                </li>
              );
            }
          })}
        </StyledList>
      </main>
    </div>
  );
}

const StyledList = styled.ul`
  list-style: none;
`;
